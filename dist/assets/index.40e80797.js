var O=Object.defineProperty;var N=(m,l,f)=>l in m?O(m,l,{enumerable:!0,configurable:!0,writable:!0,value:f}):m[l]=f;var S=(m,l,f)=>(N(m,typeof l!="symbol"?l+"":l,f),f);const T=function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))v(d);new MutationObserver(d=>{for(const n of d)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&v(r)}).observe(document,{childList:!0,subtree:!0});function f(d){const n={};return d.integrity&&(n.integrity=d.integrity),d.referrerpolicy&&(n.referrerPolicy=d.referrerpolicy),d.crossorigin==="use-credentials"?n.credentials="include":d.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function v(d){if(d.ep)return;d.ep=!0;const n=f(d);fetch(d.href,n)}};T();(function(){class m{constructor(t,e,s,a){S(this,"_redius",24);S(this,"_gridGap",6);this.gridRow=t,this.gridCol=e,this.gridType=s,this.isWalkable=a}drawGrid(t,e){e.beginPath(),e.arc(this.getGridPosition(t).gridPositionX,this.getGridPosition(t).gridPositionY,this.gridRadius,0,Math.PI*2,!0),e.fillStyle=this.gridColor[this.gridType],e.fill(),e.closePath()}getGridPosition(t){const e={};return this.gridRow%2==0?(e.gridPositionX=+this.gridRadius*3/2+this.gridCol*(this.gridRadius*2+this.gridGap),e.gridPositionY=+this.gridRadius+this.gridRow*(this.gridRadius*2+this.gridGap)):(e.gridPositionX=+t.gameCanvasWidth-(+this.gridRadius*3/2+(t.gameGridsColCount-1-this.gridCol)*(this.gridRadius*2+this.gridGap)),e.gridPositionY=+this.gridRadius+this.gridRow*(this.gridRadius*2+this.gridGap)),e}get gridColor(){return["#B5B5B5","#FF845E","#CCFF00"]}get gridRadius(){return this._redius}set gridRadius(t){this._redius=t}get gridGap(){return this._gridGap}set gridGap(t){this._gridGap=t}}class l{constructor(t,e){this.catX=t,this.catY=e}}class f{constructor(t,e){this.barrierX=t,this.barrierY=e}}class v{constructor(t,e,s){S(this,"_gameCanvasWidth",0);S(this,"_gameCanvasHeight",0);this.gameStart=t,this.gameSteps=e,this.gameMinSteps=s}setGameMinSteps(t){document.getElementById("minSteps").innerHTML=t}setGameSteps(t){document.getElementById("steps").innerHTML=t}getGameGridData(){const t={},e=document.body.clientWidth;return e>1023&&e<1440?(t.gridRadius=24,t.gridGap=6):e>768&&e<1024?(t.gridRadius=20,t.gridGap=5):e>480&&e<769?(t.gridRadius=16,t.gridGap=4):e<481?(t.gridRadius=12,t.gridGap=3):(t.gridRadius=24,t.gridGap=6),t}setGameCanvasSize(){const t=this.getGameGridData();this.gameCanvasWidth=+t.gridRadius*2*this.gameGridsColCount+t.gridGap*(this.gameGridsColCount-1)+t.gridRadius*2+t.gridGap/2,this.gameCanvasHeight=+t.gridRadius*2*this.gameGridsRowCount+t.gridGap*(this.gameGridsRowCount-1),document.getElementById("canvas").setAttribute("width",this.gameCanvasWidth),document.getElementById("canvas").setAttribute("height",this.gameCanvasHeight)}initGameCat(){const t=(r.gameGridsColCount-1)/2,e=(r.gameGridsRowCount-1)/2;return new l(t,e)}initGameBarriers(){const t=[],e=[],s=[];for(let a=0;a<this.gameGridsRowCount;a++)e.push(a);for(let a=0;a<this.gameGridsColCount;a++)s.push(a);for(let a=0;a<this.gameBarriersCount;a++){let o=Math.floor(Math.random()*this.gameGridsRowCount),u=Math.floor(Math.random()*this.gameGridsColCount);for(;e[o]===-1&&s[u]===-1||o===4&&u===4;)o=Math.floor(Math.random()*this.gameGridsRowCount),u=Math.floor(Math.random()*this.gameGridsColCount);t.push(new f(o,u)),e[o]=-1,s[u]=-1}return t}initGameGrids(t,e,s){const a=[];let o,u,c,C=this;for(let p=0;p<this.gameGridsRowCount;p++){a[p]=[];for(let R=0;R<this.gameGridsColCount;R++){u=0,c=!0;for(let M=0;M<e.length;M++){const W=e[M];if(W.barrierX===p&&W.barrierY===R){u=1,c=!1;break}}s.catX===p&&s.catY===R&&(u=2,c=!1),o=new m(p,R,u,c),o.gridRadius=t.gridRadius,o.gridGap=t.gridGap,o.drawGrid(C,n),a[p][R]=o}}return a}get gameGridsRowCount(){return 9}get gameGridsColCount(){return 9}get gameCanvasWidth(){return this._gameCanvasWidth}set gameCanvasWidth(t){this._gameCanvasWidth=t}get gameCanvasHeight(){return this._gameCanvasHeight}set gameCanvasHeight(t){this._gameCanvasHeight=t}get gameBarriersCount(){return 6}}const d=document.getElementById("canvas"),n=d.getContext("2d");let r,h=[],g,G,w;function B(i,t,e){return n.beginPath(),n.arc(e.getGridPosition(r).gridPositionX,e.getGridPosition(r).gridPositionY,e.gridRadius,0,Math.PI*2,!0),n.closePath(),n.isPointInPath(i,t)}function P(i,t,e,s){h[i][t].gridType=e,h[i][t].drawGrid(r,n),h[i][t].isWalkable=s}function y(i,t,e,s){var a=new m(i,t,e,s);a.gridRadius=r.getGameGridData().gridRadius,a.gridGap=r.getGameGridData().gridGap,n.clearRect(a.getGridPosition(r).gridPositionX-a.gridRadius,a.getGridPosition(r).gridPositionY-a.gridRadius,a.gridRadius*2,a.gridRadius*2)}function D(){G=[];for(var i=0;i<r.gameGridsRowCount;i++){G[i]=[];for(var t=0;t<r.gameGridsColCount;t++)G[i][t]=!1}}function Y(){for(var i=0;i<r.gameGridsRowCount;i++)for(var t=0;t<r.gameGridsColCount;t++)h[i][t].isWalkable&&(h[i][t].searchDepth=1)}function b(i,t){const e=[],s=[[-1,-1],[-1,0],[0,-1],[0,1],[1,-1],[1,0]],a=[[-1,0],[-1,1],[0,-1],[0,1],[1,0],[1,1]];let o=[];t.gridRow%2==0?o=s:o=a;for(let u=0;u<o.length;u++){const c=o[u][0],C=o[u][1];console.log(t),t.gridRow+c<r.gameGridsRowCount&&t.gridCol+C<r.gameGridsColCount&&h[t.gridRow+c][t.gridCol+C].isWalkable&&(G[t.gridRow+c][t.gridCol+C]||(h[t.gridRow+c][t.gridCol+C].searchDepth=i+1),e.push(h[t.gridRow+c][t.gridCol+C]))}return e}function I(i){const t=[];for(let e=0;e<i.length;e++)_(i[e])&&(t.push({gridDepth:w,grid:i[e]}),D(),Y());return t}function X(i){if(i.gridRow==0||i.gridRow==r.gameGridRowCount-1||i.gridCol==0||i.gridCol==r.gameGridColCount-1)return!0}function _(i){if(X(i))return w=i.searchDepth,!0;const t=[];for(t.push(i),G[i.gridRow][i.gridCol]=!0;t.length;){const e=t.shift(),s=b(e.searchDepth,e);for(let a=0;a<s.length;a++){const o=s[a];if(X(o))return w=o.searchDepth,!0;G[o.gridRow][o.gridCol]||(t.push(o),G[o.gridRow][o.gridCol]=!0)}}}function k(){const i=b(w,h[g.catX][g.catY]);var t=I(i);if(console.log("surrGridsSearchResult",i,t),t.length!==0){for(var e=[],s=0;s<t.length;s++)t[s].gridDepth===E(t)&&e.push(t[s].grid);const a=e[Math.floor(Math.random()*e.length)];y(g.catX,g.catY,2,!1),P(g.catX,g.catY,0,!0),g.catX=a.gridRow,g.catY=a.gridCol,P(g.catX,g.catY,2,!1),L()}else H()}function E(i){var t=[];for(let o=0;o<i.length;o++)t.push(i[o].gridDepth);for(var e=0;e<t.length-1;e++)for(var s=0;s<t.length-1-e;s++)if(t[s]>t[s+1]){var a=t[s];t[s]=t[s+1],t[s+1]=a}return t[0]}function H(){const i=JSON.parse(window.localStorage.getItem("gameData"));if(i!=null)i.gameMinSteps>r.gameSteps&&(i.gameMinSteps=r.gameSteps,window.localStorage.setItem("gameData",JSON.stringify(i)));else{const t={};t.gameMinSteps=r.gameSteps,window.localStorage.setItem("gameData",JSON.stringify(t))}alert("You win\uFF01Steps\uFF1A"+r.gameSteps),document.location.reload()}function L(){(g.catX===0||g.catX===r.gameGridRowCount-1||g.catY===0||g.catY===r.gameGridColCount-1)&&(alert("You lose ! Please try again"),document.location.reload())}d.addEventListener("click",function(i){for(let t=0;t<r.gameGridsRowCount;t++)for(let e=0;e<r.gameGridsColCount;e++)B(i.offsetX,i.offsetY,h[t][e])&&h[t][e].gridType===0&&(y(t,e,1,!0),P(t,e,1,!1),D(),Y(),w=0,k(),r.gameSteps++,r.setGameSteps(r.gameSteps))},!1),function(){r=new v(!0,0,0);const i=JSON.parse(window.localStorage.getItem("gameData"));i!=null?r.setGameMinSteps(i.gameMinSteps):r.setGameMinSteps(r.gameMinSteps),r.setGameSteps(r.gameSteps),r.setGameCanvasSize(),g=r.initGameCat(),h=r.initGameGrids(r.getGameGridData(),r.initGameBarriers(),g)}()})();
